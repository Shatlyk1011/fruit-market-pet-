"use strict";(self["webpackChunkpet_proj"]=self["webpackChunkpet_proj"]||[]).push([[300],{402:function(e,t,n){var a=n(4870),r=n(7732);const i=e=>{const t=(0,a.iH)(null),n=(0,a.iH)(!1),i=async a=>{t.value=null,n.value=!0;try{const t=await r.H1.collection(e).add(a);return n.value=!1,t}catch(i){t.value=`Ошибка: ${i.message}`,n.value=!1}};return{error:t,addDoc:i,isPending:n}};t["Z"]=i},1434:function(e,t,n){var a=n(4870),r=n(7732),i=n(9944);const{user:o}=(0,i.Z)(),u=()=>{const e=(0,a.iH)(null),t=(0,a.iH)(null),n=(0,a.iH)(null),i=async a=>{n.value=`images/${o.value.uid}/${a.name}`;const i=r.vY.ref(n.value);try{const e=await i.put(a);t.value=await e.ref.getDownloadURL()}catch(u){e.value=u.message}},u=async t=>{const n=r.vY.ref(t);try{await n.delete()}catch(a){e.value=`Ошибка: ${a.message}`}};return{error:e,url:t,filePath:n,uploadImage:i,deleteImage:u}};t["Z"]=u},3300:function(e,t,n){n.r(t),n.d(t,{default:function(){return fn}});var a=n(3396),r=n(7139);const i={class:"px-2 md:px-4"},o={key:0,class:"w-full p-4 md:p-6 bg-white"},u={class:"mx-auto flex flex-col md:flex-row gap-4 md:gap-8"},l={class:"md:w-1/2"},s=["src"],d={class:"flex flex-col justify-between gap-2 md:w-1/2"},c={class:"text-xl md:text-2xl font-medium self-center serif mb-2 md:mb-4"},m={class:"text-sm trac line-clamp tracking-wider"},v={class:"flex justify-between gap-2"},f={class:"flex flex-col gap-2"},g={class:"px-2 py-0.5 md:px-3 md:py-1.5 text-xs sm:text-sm bg-main text-white/90 font-medium self-start justify-self-center serif tracking-wider rounded"},h=(0,a._)("span",{class:"font-normal"},"Цена за кг: ",-1),p={class:"text-sm"},w={class:"underline font-medium serif tracking-wide text-sm"},b={key:0,class:"mt-auto flex flex-col gap-1 items-center"},y=(0,a._)("h5",{class:"text-xs text-zinc-400 font-bold"},"Это ваш товар",-1),x={key:1,class:"text-xs px-2 py-1 border border-transparent text-zinc-400 cursor-not-allowed bg-zinc-100 rounded-full transition duration-200 active:scale-95 select-none self-end",disabled:""},M={class:"bg-zinc-50 mt-2 px-2 py-3"},D={key:1},k={key:0,class:"error px-6 py-6"};function W(e,t,n,W,P,G){const S=(0,a.up)("CommentsForm"),N=(0,a.up)("Spinner");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[W.product?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",u,[(0,a._)("div",l,[(0,a._)("img",{src:W.product.imageUrl,class:"w-full",alt:""},null,8,s)]),(0,a._)("div",d,[(0,a._)("div",null,[(0,a._)("div",c,(0,r.zw)(W.product.title),1),(0,a._)("div",m,(0,r.zw)(W.product.description),1)]),(0,a._)("div",v,[(0,a._)("div",f,[(0,a._)("div",g,[h,(0,a.Uk)(" "+(0,r.zw)(W.product.price)+" ₽",1)]),(0,a._)("div",p,[(0,a.Uk)("Продавец: "),(0,a._)("span",w,(0,r.zw)(W.product.userName),1)])]),((0,a.wg)(),(0,a.iD)("div",b,[y,W.isPending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>W.handleDelete&&W.handleDelete(...e)),class:"text-xs px-2 py-1 border border-red-400 text-red-400 hover:bg-transparent hover:text-red-600 hover:border-red-600 rounded-full cursor-pointer transition duration-200 active:scale-95 select-none self-end"},"Удалить товар")),W.isPending?((0,a.wg)(),(0,a.iD)("div",x,"Удалить товар")):(0,a.kq)("",!0)]))])])]),(0,a._)("div",M,[(0,a.Wm)(S,{id:n.id},null,8,["id"])])])):((0,a.wg)(),(0,a.iD)("div",D,[(0,a.Wm)(N)]))]),W.error?((0,a.wg)(),(0,a.iD)("div",k,(0,r.zw)(W.error),1)):(0,a.kq)("",!0)],64)}n(7658);var P=n(9242);const G={class:"mb-4"},S=(0,a._)("h2",{class:"mb-2 text-lg font-medium text-zinc-700"},"Комментарии",-1),N={key:1,type:"text",placeholder:"Отправляем...",class:"px-1 py-2 placeholder:text-xs tracking-wide font-medium focus:outline-none required border-b-2 border-transparent focus:border-b-zinc-500 caret-zinc-700 w-1/2",disabled:""},C={key:2,type:"text",placeholder:"Войдите что бы оставлять коментарии",class:"px-1 py-2 placeholder:text-xs tracking-wide font-medium focus:outline-none required border-b-2 border-transparent focus:border-b-zinc-500 caret-zinc-700 w-1/2",disabled:""},T={key:3,class:"error"},H={class:"max-h-60 overflow-auto"};function z(e,t,n,i,o,u){const l=(0,a.up)("CommentsView");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",G,[S,!i.isPending&&i.currentUser?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,onKeyup:t[0]||(t[0]=(0,P.D2)(((...e)=>i.handleComment&&i.handleComment(...e)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=e=>i.title=e),type:"text",placeholder:"Нажмите Enter для отправки",class:"px-1 py-2 placeholder:text-xs tracking-wide font-medium focus:outline-none required border-b-2 border-transparent focus:border-b-zinc-500 caret-zinc-700 w-1/2"},null,544)),[[P.nr,i.title,void 0,{trim:!0}]]):(0,a.kq)("",!0),i.isPending?((0,a.wg)(),(0,a.iD)("input",N)):(0,a.kq)("",!0),i.currentUser?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("input",C)),i.error?((0,a.wg)(),(0,a.iD)("div",T,(0,r.zw)(i.error),1)):(0,a.kq)("",!0)]),(0,a._)("div",H,[(0,a.Wm)(l,{id:n.id},null,8,["id"])])],64)}var X=n(4870),_=n(7732),j=n(9944),q=n(402);const F={class:"relative"},Y={class:"text-base font-extrabold font-serif"},A={class:"text-sm"},U={class:"text-xs` text-zinc-500 text-xs"},E=["onClick"],O={key:0,class:"error"};function I(e,t,n,i,o,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",F,[(0,a.Wm)(P.uT,{name:"comments",mode:"in-out"},{default:(0,a.w5)((()=>[(0,a.Wm)(P.W3,{tag:"ul",name:"list",appear:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.formatDate,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"w-1/2 relative",key:e.id},[(0,a._)("div",Y,(0,r.zw)(e.author),1),(0,a._)("div",A,(0,r.zw)(e.title),1),(0,a._)("div",U,(0,r.zw)(e.createdAt)+" назад",1),e.author==i.currentUser?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t=>i.handleDelete(e.commentId),class:"text-xs text-red-400 hover:text-red-500 transition-all hover:border-b-red-500 cursor-pointer active:scale-95 select-none absolute right-0 bottom-0"},"удалить",8,E)):(0,a.kq)("",!0)])))),128))])),_:1})])),_:1})]),i.error?((0,a.wg)(),(0,a.iD)("div",O,(0,r.zw)(i.error),1)):(0,a.kq)("",!0)],64)}var Z=n(2579),V={};function J(){return V}function R(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function B(e){return B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function $(e){R(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===B(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Q(e,t){R(2,arguments);var n=$(e),a=$(t),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}function L(e,t){R(2,arguments);var n=$(e),a=$(t),r=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return 12*r+i}function K(e){R(1,arguments);var t=$(e);return t.setHours(23,59,59,999),t}function ee(e){R(1,arguments);var t=$(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function te(e){R(1,arguments);var t=$(e);return K(t).getTime()===ee(t).getTime()}function ne(e,t){R(2,arguments);var n,a=$(e),r=$(t),i=Q(a,r),o=Math.abs(L(a,r));if(o<1)n=0;else{1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*o);var u=Q(a,r)===-i;te($(e))&&1===o&&1===Q(e,r)&&(u=!1),n=i*(o-Number(u))}return 0===n?0:n}function ae(e,t){return R(2,arguments),$(e).getTime()-$(t).getTime()}var re={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},ie="trunc";function oe(e){return e?re[e]:re[ie]}function ue(e,t,n){R(2,arguments);var a=ae(e,t)/1e3;return oe(null===n||void 0===n?void 0:n.roundingMethod)(a)}var le={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},se=function(e,t,n){var a,r=le[e];return a="string"===typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},de=se;function ce(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var me={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ge={date:ce({formats:me,defaultWidth:"full"}),time:ce({formats:ve,defaultWidth:"full"}),dateTime:ce({formats:fe,defaultWidth:"full"})},he=ge,pe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},we=function(e,t,n,a){return pe[e]},be=we;function ye(e){return function(t,n){var a,r=null!==n&&void 0!==n&&n.context?String(n.context):"standalone";if("formatting"===r&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var u=e.defaultWidth,l=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[u]}var s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}var xe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Me={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},De={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ke={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},We={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ge=function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Se={ordinalNumber:Ge,era:ye({values:xe,defaultWidth:"wide"}),quarter:ye({values:Me,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ye({values:De,defaultWidth:"wide"}),day:ye({values:ke,defaultWidth:"wide"}),dayPeriod:ye({values:We,defaultWidth:"wide",formattingValues:Pe,defaultFormattingWidth:"wide"})},Ne=Se;function Ce(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var o,u=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],s=Array.isArray(l)?He(l,(function(e){return e.test(u)})):Te(l,(function(e){return e.test(u)}));o=e.valueCallback?e.valueCallback(s):s,o=n.valueCallback?n.valueCallback(o):o;var d=t.slice(u.length);return{value:o,rest:d}}}function Te(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function He(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function ze(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.match(e.matchPattern);if(!a)return null;var r=a[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var u=t.slice(r.length);return{value:o,rest:u}}}var Xe=/^(\d+)(th|st|nd|rd)?/i,_e=/\d+/i,je={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qe={any:[/^b/i,/^(a|c)/i]},Fe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ye={any:[/1/i,/2/i,/3/i,/4/i]},Ae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ze={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ve={ordinalNumber:ze({matchPattern:Xe,parsePattern:_e,valueCallback:function(e){return parseInt(e,10)}}),era:Ce({matchPatterns:je,defaultMatchWidth:"wide",parsePatterns:qe,defaultParseWidth:"any"}),quarter:Ce({matchPatterns:Fe,defaultMatchWidth:"wide",parsePatterns:Ye,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ce({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:Ue,defaultParseWidth:"any"}),day:Ce({matchPatterns:Ee,defaultMatchWidth:"wide",parsePatterns:Oe,defaultParseWidth:"any"}),dayPeriod:Ce({matchPatterns:Ie,defaultMatchWidth:"any",parsePatterns:Ze,defaultParseWidth:"any"})},Je=Ve,Re={code:"en-US",formatDistance:de,formatLong:he,formatRelative:be,localize:Ne,match:Je,options:{weekStartsOn:0,firstWeekContainsDate:1}},Be=Re,$e=Be;function Qe(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Le(e){return Qe({},e)}function Ke(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var et=1440,tt=2520,nt=43200,at=86400;function rt(e,t,n){var a,r;R(2,arguments);var i=J(),o=null!==(a=null!==(r=null===n||void 0===n?void 0:n.locale)&&void 0!==r?r:i.locale)&&void 0!==a?a:$e;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=Q(e,t);if(isNaN(u))throw new RangeError("Invalid time value");var l,s,d=Qe(Le(n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:u});u>0?(l=$(t),s=$(e)):(l=$(e),s=$(t));var c,m=ue(s,l),v=(Ke(s)-Ke(l))/1e3,f=Math.round((m-v)/60);if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,d):m<10?o.formatDistance("lessThanXSeconds",10,d):m<20?o.formatDistance("lessThanXSeconds",20,d):m<40?o.formatDistance("halfAMinute",0,d):m<60?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",1,d):0===f?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",f,d);if(f<45)return o.formatDistance("xMinutes",f,d);if(f<90)return o.formatDistance("aboutXHours",1,d);if(f<et){var g=Math.round(f/60);return o.formatDistance("aboutXHours",g,d)}if(f<tt)return o.formatDistance("xDays",1,d);if(f<nt){var h=Math.round(f/et);return o.formatDistance("xDays",h,d)}if(f<at)return c=Math.round(f/nt),o.formatDistance("aboutXMonths",c,d);if(c=ne(s,l),c<12){var p=Math.round(f/nt);return o.formatDistance("xMonths",p,d)}var w=c%12,b=Math.floor(c/12);return w<3?o.formatDistance("aboutXYears",b,d):w<9?o.formatDistance("overXYears",b,d):o.formatDistance("almostXYears",b+1,d)}function it(e,t){if(void 0!==e.one&&1===t)return e.one;var n=t%10,a=t%100;return 1===n&&11!==a?e.singularNominative.replace("{{count}}",String(t)):n>=2&&n<=4&&(a<10||a>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function ot(e){return function(t,n){return null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?e.future?it(e.future,t):"через "+it(e.regular,t):e.past?it(e.past,t):it(e.regular,t)+" назад":it(e.regular,t)}}var ut={lessThanXSeconds:ot({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:ot({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,t){return null!==t&&void 0!==t&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:ot({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:ot({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:ot({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:ot({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:ot({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:ot({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:ot({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:ot({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:ot({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:ot({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:ot({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:ot({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:ot({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},lt=function(e,t,n){return ut[e](t,n)},st=lt,dt={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},ct={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},mt={any:"{{date}}, {{time}}"},vt={date:ce({formats:dt,defaultWidth:"full"}),time:ce({formats:ct,defaultWidth:"full"}),dateTime:ce({formats:mt,defaultWidth:"any"})},ft=vt;function gt(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ht(e,t){var n,a,r,i,o,u,l,s;R(1,arguments);var d=J(),c=gt(null!==(n=null!==(a=null!==(r=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(u=o.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==a?a:null===(l=d.locale)||void 0===l||null===(s=l.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=$(e),v=m.getUTCDay(),f=(v<c?7:0)+v-c;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function pt(e,t,n){R(2,arguments);var a=ht(e,n),r=ht(t,n);return a.getTime()===r.getTime()}var wt=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function bt(e){var t=wt[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function yt(e){var t=wt[e];return 2===e?"'во "+t+" в' p":"'в "+t+" в' p"}function xt(e){var t=wt[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}var Mt={lastWeek:function(e,t,n){var a=e.getUTCDay();return pt(e,t,n)?yt(a):bt(a)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(e,t,n){var a=e.getUTCDay();return pt(e,t,n)?yt(a):xt(a)},other:"P"},Dt=function(e,t,n,a){var r=Mt[e];return"function"===typeof r?r(t,n,a):r},kt=Dt,Wt={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},Pt={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},Gt={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},St={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},Nt={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},Ct={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},Tt={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},Ht=function(e,t){var n,a=Number(e),r=null===t||void 0===t?void 0:t.unit;return n="date"===r?"-е":"week"===r||"minute"===r||"second"===r?"-я":"-й",a+n},zt={ordinalNumber:Ht,era:ye({values:Wt,defaultWidth:"wide"}),quarter:ye({values:Pt,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ye({values:Gt,defaultWidth:"wide",formattingValues:St,defaultFormattingWidth:"wide"}),day:ye({values:Nt,defaultWidth:"wide"}),dayPeriod:ye({values:Ct,defaultWidth:"any",formattingValues:Tt,defaultFormattingWidth:"wide"})},Xt=zt,_t=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,jt=/\d+/i,qt={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},Ft={any:[/^д/i,/^н/i]},Yt={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},At={any:[/1/i,/2/i,/3/i,/4/i]},Ut={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},Et={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},Ot={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},It={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},Zt={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},Vt={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},Jt={ordinalNumber:ze({matchPattern:_t,parsePattern:jt,valueCallback:function(e){return parseInt(e,10)}}),era:Ce({matchPatterns:qt,defaultMatchWidth:"wide",parsePatterns:Ft,defaultParseWidth:"any"}),quarter:Ce({matchPatterns:Yt,defaultMatchWidth:"wide",parsePatterns:At,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ce({matchPatterns:Ut,defaultMatchWidth:"wide",parsePatterns:Et,defaultParseWidth:"any"}),day:Ce({matchPatterns:Ot,defaultMatchWidth:"wide",parsePatterns:It,defaultParseWidth:"any"}),dayPeriod:Ce({matchPatterns:Zt,defaultMatchWidth:"wide",parsePatterns:Vt,defaultParseWidth:"any"})},Rt=Jt,Bt={code:"ru",formatDistance:st,formatLong:ft,formatRelative:kt,localize:Xt,match:Rt,options:{weekStartsOn:1,firstWeekContainsDate:1}},$t=Bt,Qt={name:"CommentsView",props:["id"],setup(e){const{products:t,error:n}=(0,Z.Z)("comments",["docId","==",e.id]),{user:r}=(0,j.Z)(),i=(0,a.Fl)((()=>{if(r.value)return r.value.displayName})),o=new Date,u=(0,a.Fl)((()=>{if(t.value)return t.value.map((e=>{let t=Number(e.createdAt.toDate()),n=rt(t,o,{locale:$t});return{...e,createdAt:n}}))})),l=async e=>{await _.H1.collection("comments").doc(e).delete()};return{comments:t,handleDelete:l,formatDate:u,user:r,currentUser:i,error:n}}},Lt=n(89);const Kt=(0,Lt.Z)(Qt,[["render",I]]);var en=Kt,tn={name:"CommentsForm",components:{CommentsView:en},props:["id"],setup(e){const t=(0,X.iH)(""),n=(0,X.iH)(null),{user:a}=(0,j.Z)(),{addDoc:r,error:i,isPending:o}=(0,q.Z)("comments"),u=a.value,l=async()=>{if(a.value&&""!==t.value){const o={author:a.value.displayName,title:t.value,createdAt:(0,_.AB)(),docId:e.id,commentId:""};await r(o).then((e=>{n.value=e.id,_.H1.collection("comments").doc(n.value).update({commentId:n.value})})),i.value||(t.value="")}};return{title:t,handleComment:l,isPending:o,currentUser:u,error:i}}};const nn=(0,Lt.Z)(tn,[["render",z]]);var an=nn;const rn=(e,t)=>{const n=(0,X.iH)(null),r=(0,X.iH)(null);let i=_.H1.collection(e).doc(t);const o=i.onSnapshot((e=>{e.data()?(n.value={...e.data(),id:e.id},r.value=null):r.value="Этот документ более не существует"}));return(0,a.m0)((e=>{e((()=>o()))})),{error:r,document:n}};var on=rn;const un=(e,t)=>{const n=(0,X.iH)(null),a=(0,X.iH)(!1);let r=_.H1.collection(e).doc(t);const i=async()=>{a.value=!0,n.value=null;try{const e=await r.delete();return a.value=!1,e}catch(e){a.value=!1,n.value="Could not delete the document"}},o=async e=>{a.value=!0,n.value=null;try{const t=await r.update(e);return a.value=!1,t}catch(t){a.value=!1,n.value=`Ошибка: ${t.message}`}};return{error:n,isPending:a,deleteDoc:i,updateDoc:o}};var ln=un,sn=n(1434),dn=n(505),cn=n(2483),mn={name:"ProductDescription",props:["id"],components:{CommentsForm:an,Spinner:dn.Z},setup(e){const{error:t,document:n}=on("products",e.id),{deleteDoc:r}=ln("products",e.id),{products:i}=(0,Z.Z)("comments",["docId","==",e.id]),{deleteImage:o}=(0,sn.Z)(),{user:u}=(0,j.Z)(),l=(0,X.iH)(null),s=(0,cn.tv)(),d=(0,a.Fl)((()=>n.value&&u.value&&u.value.uid==n.value.userUid)),c=async()=>{l.value=!0,await o(n.value.filePath),await r();for(let e=0;e<i.value.length;e++){let t=i.value[e].commentId;const{deleteDoc:n}=ln("comments",t);n()}l.value=!1,s.push({name:"Home"})};return{error:t,product:n,userProduct:d,handleDelete:c,isPending:l}}};const vn=(0,Lt.Z)(mn,[["render",W]]);var fn=vn}}]);
//# sourceMappingURL=300.4d48b09b.js.map